version: '3.8'
services:
  app:
    build: ./service/app
    environment:
      - BUSINESS_HOST=data
      - BUSINESS_PORT=8080
    ports:
      - 8080:8080




  business:
    build: ./service/business
    environment:
      - DATA_HOST=data
      - DATA_PORT=8090
    ports:
      - 8090:8090

    depends_on:
      - app


  data:
    build:
      context: ./service/data
      dockerfile: Dockerfile
    environment:
      - PORT=8091
      - SPRING_DATASOURCE_URL=jdbc:postgresql://postgres/root
      - JS_URL=http://localhost
    image: 'my-java-application'
    ports:
      - 8091:8091

  postgres:
    build:
      context: /service/postgres
      dockerfile: Dockerfile
    ports:
      - "5433:5432"
    environment:
      - POSTGRES_USER=artemaverkov
      - POSTGRES_DB=root
      - POSTGRES_PASSWORD=root


